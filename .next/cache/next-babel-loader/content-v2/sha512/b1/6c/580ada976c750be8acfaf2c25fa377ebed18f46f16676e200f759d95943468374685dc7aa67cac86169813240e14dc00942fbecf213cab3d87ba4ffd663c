{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/eimanalwahhabi/Desktop/RecycleChain/pages/productionline.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Button, Message, Form, Dropdown, Container, Grind } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport bottleContract from '../ethereum/bottleProduction';\nimport dynamic from 'next/dynamic';\nvar QrCode = dynamic(_c = function _c() {\n  return import('react.qrcode.generator');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react.qrcode.generator')];\n    },\n    modules: ['react.qrcode.generator']\n  }\n});\n_c2 = QrCode;\nimport Layout from '../components/Layout'; //Dropdownmenu selections\n\nvar bottleTypesOptions = [{\n  key: 1,\n  text: 'PET (Polyethylene Terephthalate)',\n  value: 0\n}, {\n  key: 2,\n  text: 'LDPE/HDPE (Low- and High-Density Polyethylene)',\n  value: 1\n}, {\n  key: 3,\n  text: 'PP (Polypropylene)',\n  value: 2\n}, {\n  key: 4,\n  text: 'PC (Polycarbonate)',\n  value: 3\n}];\nvar bottleColorOptions = [{\n  key: 1,\n  text: 'Clear',\n  value: 0\n}, {\n  key: 2,\n  text: 'White',\n  value: 1\n}, {\n  key: 3,\n  text: 'Red',\n  value: 2\n}, {\n  key: 4,\n  text: 'Blue',\n  value: 3\n}, {\n  key: 4,\n  text: 'Black',\n  value: 4\n}];\nvar bottleSizeOptions = [{\n  key: 1,\n  text: '100 mL',\n  value: 0\n}, {\n  key: 2,\n  text: '200 mL',\n  value: 1\n}, {\n  key: 3,\n  text: '330 mL',\n  value: 2\n}, {\n  key: 4,\n  text: '500 mL',\n  value: 3\n}, {\n  key: 4,\n  text: '1.5L',\n  value: 4\n}];\n\nvar manufacturingMachinePage = /*#__PURE__*/function (_Component) {\n  _inherits(manufacturingMachinePage, _Component);\n\n  var _super = _createSuper(manufacturingMachinePage);\n\n  function manufacturingMachinePage(props) {\n    var _this;\n\n    _classCallCheck(this, manufacturingMachinePage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var accounts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault(); // prevents the browser from submitting the form immediately\n\n                _context.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context.sent;\n                _context.prev = 4;\n                _context.next = 7;\n                return bottleContract.methods.registerBottle(_this.state.registerSCAddress, _this.state.bottleType, _this.state.bottleColor, _this.state.bottleSize).send({\n                  from: accounts[0]\n                });\n\n              case 7:\n                _context.next = 13;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](4);\n\n                _this.setState({\n                  errorMessage: _context.t0.message\n                });\n\n                _this.setState({\n                  hasError: false\n                });\n\n              case 13:\n                // if errorMsg is empty, registration is successful\n                if (!_this.state.errorMessage) _this.setState({\n                  hasNoError: true\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onGenerate\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return bottleContract.methods.getBottleAddress().call();\n\n              case 2:\n                _this.state.bottleQR = _context2.sent;\n                console.log(_this.state.bottleQR);\n\n                _this.setState({\n                  QRcodePic: true\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeType\", function (e, _ref3) {\n      var value = _ref3.value;\n      return _this.setState({\n        bottleType: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeColor\", function (e, _ref4) {\n      var value = _ref4.value;\n      return _this.setState({\n        bottleColor: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeSize\", function (e, _ref5) {\n      var value = _ref5.value;\n      return _this.setState({\n        bottleSize: value\n      });\n    });\n\n    _this.state = {\n      registerSCAddress: '0x7126ec4f68added009015a1f5ac718c4896faa2e',\n      bottleType: '',\n      bottleColor: '',\n      bottleSize: '',\n      bottleQR: '',\n      errorMessage: '',\n      hasNoError: false,\n      QRcodePic: false\n    };\n    return _this;\n  } //produce bottle QR code\n\n\n  _createClass(manufacturingMachinePage, [{\n    key: \"render\",\n    value: function render() {\n      var value = this.state.value;\n      return __jsx(Layout, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"ProductionLine\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }\n      }, __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, \" MProduction Line Page\"), __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }), __jsx(Form, {\n        onSubmit: this.onSubmit,\n        error: !!this.state.errorMessage,\n        success: this.state.hasNoError,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, __jsx(Form.Field, {\n        width: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 43\n        }\n      }, \"Bottle Material:   \"), __jsx(Dropdown, {\n        placeholder: \"Choose Bottle Material\",\n        clearable: true,\n        options: bottleTypesOptions,\n        selection: true,\n        onChange: this.handleChangeType,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      })), __jsx(Form.Field, {\n        width: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 43\n        }\n      }, \"Bottle Color:   \"), __jsx(Dropdown, {\n        placeholder: \"Choose Bottle Color\",\n        clearable: true,\n        options: bottleColorOptions,\n        selection: true,\n        onChange: this.handleChangeColor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }\n      })), __jsx(Form.Field, {\n        width: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 43\n        }\n      }, \"Bottle Size:   \"), __jsx(Dropdown, {\n        placeholder: \"Choose Bottle Size\",\n        clearable: true,\n        options: bottleSizeOptions,\n        selection: true,\n        onChange: this.handleChangeSize,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }\n      })), __jsx(Message, {\n        error: true,\n        header: \"Error!\",\n        content: this.state.errorMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }), __jsx(Message, {\n        success: true,\n        header: \"Success!\",\n        content: \"QR code generated successfully!\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }), __jsx(Button, {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, \"Submit\")), __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }\n      }, this.state.bottleQR), __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }\n      }, this.state.QRcodePic == true ? __jsx(QrCode, {\n        value: this.state.bottleQR,\n        QrCode: true,\n        size: '400',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 54\n        }\n      }) : '', \" \"), __jsx(Form, {\n        onSubmit: this.onGenerate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }, __jsx(Button, {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, \"Generate QR Code\"))));\n    }\n  }]);\n\n  return manufacturingMachinePage;\n}(Component);\n\nexport default manufacturingMachinePage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"QrCode$dynamic\");\n$RefreshReg$(_c2, \"QrCode\");","map":{"version":3,"sources":["/Users/eimanalwahhabi/Desktop/RecycleChain/pages/productionline.js"],"names":["React","Component","Button","Message","Form","Dropdown","Container","Grind","web3","bottleContract","dynamic","QrCode","ssr","Layout","bottleTypesOptions","key","text","value","bottleColorOptions","bottleSizeOptions","manufacturingMachinePage","props","event","preventDefault","eth","getAccounts","accounts","methods","registerBottle","state","registerSCAddress","bottleType","bottleColor","bottleSize","send","from","setState","errorMessage","message","hasError","hasNoError","getBottleAddress","call","bottleQR","console","log","QRcodePic","e","onSubmit","handleChangeType","handleChangeColor","handleChangeSize","onGenerate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Button, Message, Form, Dropdown, Container, Grind} from 'semantic-ui-react';\r\nimport web3 from '../ethereum/web3';\r\nimport bottleContract from '../ethereum/bottleProduction';\r\nimport dynamic from 'next/dynamic';\r\nconst QrCode  = dynamic(() => import('react.qrcode.generator'), { ssr: false });\r\nimport Layout from '../components/Layout';\r\n\r\n//Dropdownmenu selections\r\nconst bottleTypesOptions = [\r\n    { key: 1, text: 'PET (Polyethylene Terephthalate)', value: 0 },\r\n    { key: 2, text: 'LDPE/HDPE (Low- and High-Density Polyethylene)', value: 1 },\r\n    { key: 3, text: 'PP (Polypropylene)', value: 2 },\r\n    { key: 4, text: 'PC (Polycarbonate)', value: 3 },\r\n]\r\n\r\nconst bottleColorOptions = [\r\n    { key: 1, text: 'Clear', value: 0 },\r\n    { key: 2, text: 'White', value: 1 },\r\n    { key: 3, text: 'Red', value: 2 },\r\n    { key: 4, text: 'Blue', value: 3 },\r\n    { key: 4, text: 'Black', value: 4 },\r\n]\r\n\r\nconst bottleSizeOptions = [\r\n    { key: 1, text: '100 mL', value: 0 },\r\n    { key: 2, text: '200 mL', value: 1 },\r\n    { key: 3, text: '330 mL', value: 2 },\r\n    { key: 4, text: '500 mL', value: 3 },\r\n    { key: 4, text: '1.5L', value: 4 },\r\n]\r\n\r\nclass manufacturingMachinePage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            registerSCAddress: '0x7126ec4f68added009015a1f5ac718c4896faa2e',\r\n            bottleType: '',\r\n            bottleColor: '',\r\n            bottleSize: '',\r\n            bottleQR:'',\r\n            errorMessage: '',\r\n            hasNoError: false,\r\n            QRcodePic: false\r\n        };\r\n    }\r\n    \r\n\r\n    //produce bottle QR code\r\n\r\n    onSubmit = async (event) => {\r\n\r\n        event.preventDefault(); // prevents the browser from submitting the form immediately\r\n    \r\n        const accounts = await web3.eth.getAccounts();\r\n    \r\n        try {\r\n    \r\n            await bottleContract.methods\r\n                .registerBottle(this.state.registerSCAddress, this.state.bottleType, this.state.bottleColor, this.state.bottleSize)\r\n                .send({ from: accounts[0] });\r\n\r\n        } catch (err) {\r\n\r\n            this.setState({ errorMessage: err.message });\r\n            this.setState({ hasError: false });\r\n\r\n        }\r\n    \r\n        // if errorMsg is empty, registration is successful\r\n        if (!this.state.errorMessage)\r\n            this.setState({ hasNoError: true });\r\n\r\n    };\r\n\r\n    onGenerate = async (event) =>{\r\n            this.state.bottleQR = await  bottleContract.methods.getBottleAddress().call();\r\n            console.log(this.state.bottleQR);\r\n            this.setState({QRcodePic:true});\r\n\r\n    }\r\n\r\n    handleChangeType = (e, { value }) => this.setState({bottleType: value })\r\n    handleChangeColor = (e, { value }) => this.setState({bottleColor: value })\r\n    handleChangeSize = (e, { value }) => this.setState({bottleSize: value })\r\n\r\n    render(){\r\n        const { value } = this.state\r\n\r\n        return(\r\n            <Layout>\r\n                <div className='ProductionLine'>\r\n                <h1> MProduction Line Page</h1>\r\n                <link rel=\"stylesheet\" href=\"//cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css\" />\r\n                <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage} success={this.state.hasNoError}>\r\n                    <Form.Field width={6}><label>Bottle Material:   </label>\r\n                        <Dropdown \r\n                        placeholder='Choose Bottle Material'\r\n                        clearable \r\n                        options={bottleTypesOptions} \r\n                        selection\r\n                        onChange={this.handleChangeType} />\r\n                    </Form.Field>\r\n\r\n                    <Form.Field width={6}><label>Bottle Color:   </label>\r\n                        <Dropdown \r\n                        placeholder='Choose Bottle Color'\r\n                        clearable \r\n                        options={bottleColorOptions} \r\n                        selection\r\n                        onChange={this.handleChangeColor} />\r\n                    </Form.Field>\r\n\r\n                    <Form.Field width={6}><label>Bottle Size:   </label>\r\n                        <Dropdown \r\n                        placeholder='Choose Bottle Size'\r\n                        clearable \r\n                        options={bottleSizeOptions} \r\n                        selection\r\n                        onChange={this.handleChangeSize} />\r\n                    </Form.Field>\r\n\r\n                    <Message error header=\"Error!\" content={this.state.errorMessage} />\r\n\r\n\r\n                    <Message success header=\"Success!\" content=\"QR code generated successfully!\" />\r\n\r\n\r\n                    <Button type='submit'>Submit</Button>\r\n                </Form>\r\n\r\n                <label>{this.state.bottleQR}</label>\r\n                <h1>{ this.state.QRcodePic == true ? <QrCode value={this.state.bottleQR} QrCode size = {'400'}/> : '' } </h1> \r\n            \r\n                <Form onSubmit={this.onGenerate}>\r\n                    <Button type='submit'>Generate QR Code</Button>\r\n                </Form>\r\n                </div>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\nexport default manufacturingMachinePage; "]},"metadata":{},"sourceType":"module"}